<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Page information -->

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Callisto ~ Post</title>

    <!-- Native Css project files -->
    <link rel="stylesheet" href="css/default.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/post-styles.css">

    <!-- Libraries -->
    <link rel="stylesheet" href="css/bootstrap-grid.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css">
    <link
        rel="stylesheet"
        href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.0.0/animate.compat.css"
      />

    <!-- Icon in the tab -->
    <link rel="icon" href="assets/callisto-icon.png">
</head>
<body>
  <i class="fa fa-times"></i>

  <div id="screen">
    <div id="wrapper">      
      <aside>
        <div class="side-line"></div>
         <div class="search">
              <div class="side-container">
                    <div class="search-input">
                        <i class="fas fa-search"></i>
                        <input type="text" placeholder="Search">
                    </div>
              </div>
          </div>
          <div class="side-container">
            <ul class="points">
              <li>
                  <a href="index.html" class="main-point"><i class="fas fa-home"></i>Home</a>
                  <p class="subpoint">Home sweet home</p>
              </li>
              <li>
                  <a href="about.html" class="main-point"><i class="fas fa-mountain"></i>About Callisto</a>
                  <p class="subpoint">Get to know us</p>
              </li>
              <li>
                  <a href="shop.html" class="main-point"><i class="fas fa-gem"></i>Shop</a>
                  <p class="subpoint">Ranks, boosters & more</p>
              </li>
              <li>
                  <a href="forums.html" class="main-point"><i class="far fa-newspaper"></i>Forums</a>
                  <p class="subpoint">Explore our community posts</p>
              </li>
              <li>
                  <a href="support.html" class="main-point"><i class="fas fa-info-circle"></i>Support</a>
                  <p class="subpoint">Got questions?</p>
              </li>
              <li>
                  <a href="index.html?register" class="main-point register-point"><i class="fas fa-sign-in-alt"></i>Register</a>
                  <p class="subpoint">Set up your account</p>
              </li>
          </ul>
        </div>
      </aside>       
      <main>
        <div class="container header-container">
            <div class="logo-block">
                <a href="#"><i class="fas fa-bars"></i></a>
                <div class="logo-block_inner">
                    <img src="assets/callisto.png" alt="Logo">
                    <p class="logo-subtitle"><b>Forums</b></p>
                </div>
            </div>
          </div>

          <div class="container">
            <div class="post">
              <div class="post-banner"></div>
              
              <div class="post-content">
                <div class="post-essentials">
                  <div class="main-info">
                    <p class="post-date">12/09/2020</p>
                    <h2 class="post-title">New Callisto ranks</h2>
                  </div>
                  <ul class="tags">
                    <li>#shop</li>
                    <li>#ranks</li>
                  </ul>
                </div>
                <div class="post-content-inner">
                  <p>This is supposed to be the article text itself</p>
                </div>

                <div class="post-info">
                  <div class="author">
                    <img src="" alt="" class="skin" data-uuid="5d440933-f0f4-4ed5-b574-a8739662b0d0">
                    <p class="author">Posted by <span class="ign"></span></p>
                  </div>
                  <ul class="post-stats">
                      <li class="likes">23 <i class="fas fa-heart"></i></li>
                      <li class="dislikes">4 <i class="fas fa-thumbs-down"></i></li>
                      <li class="comment-amount">1 <i class="fas fa-comments"></i></li>
                    </ul>
                </div>     
              </div>
            </div>

            <form class="post-comments">
              <div class="add-comment">
                <img src="" data-uuid="b989a299-4cd0-4bef-809d-f180eecc9894" alt="" class="skin">
                <div class="add-comment-inner">
                  <label for="comment-input">Add your comment</label>
                  <div class="add-comment-input">
                    <input id="comment-input" type="text" name="comment">
                    <a href="#" class="comment-btn"><i class="fas fa-paper-plane"></i></a>
                  </div>
                </div>
              </div>
              <!-- A brand new comment (not a reply) has to be prepended to block with a class comments  -->
              <div class="comments">
                <div class="comment">
                  <div class="comment-inner">
                    <!-- Data uuid here (the attribute on the image tag) is responsible for showing player head and correct ign -->
                    <!-- Same thing is with replies as well -->
                    <img src="" data-uuid="f59fe85f-942d-4be8-a034-804e189ea9f5" alt="" class="skin">
                    <div class="comment-info">
                      <div class="author ign"></div>
                      <p class="comment-text">Poggers, nice ranks</p>
                      <ul class="comment-stats">
                        <li class="likes">23 <i class="fas fa-heart"></i></li>
                        <li class="dislikes">4 <i class="fas fa-thumbs-down"></i></li>
                        <li><a href="#" class="reply-btn">Reply</a></li>
                      </ul>
                      <div class="reply-block">
                        <input type="text" id="reply-input">
                        <a href="#" class="reply-send"><i class="fas fa-paper-plane"></i></a>
                      </div>
                    </div>
                  </div>
                  <div class="replies">
                    <!-- When user submits reply, the reply should be posted in this element (div) -->
                    <!-- If someone replies on that reply, the reply on the reply should aslo go into the "nested" replie's elemnent with class reply -->

                    <!-- Scheme looks like that: -->

                    <!-- Comment -> replies -> comment1[replies] -> comment2[replies] etc... (nested system)-->
                  </div>
                </div>
              </div>
            </form>
          </div>
      </main>
    </div>

    <footer>
      <div class="container">
          <div class="footer-links">
            <ul class="main-nav">
              <li><a href="index.html">Home</a></li>
              <li><a href="about.html">About</a></li>
              <li><a href="shop.html">Shop</a></li>
              <li><a href="forums.html">Forums</a></li>
              <li><a href="support.html">Support</a></li>
              <li><a href="index.html?register">Register</a></li>
            </ul>

            <ul class="extra-links">
              <li><a href="support.html">FAQ</a></li>
              <li><a href="staff-apps.html">Staff applications</a></li>
              <li><a href="stats-home.html">Stats</a></li>
              <li><a href="dashboard.html">Dashboard</a></li>
            </ul>
        </div>
      </div>

      <div class="container">
        <p class="copyright">Copyright &copy; Callisto Network 2020. All rights reserved.</p>

        <ul class="social">
          <li><a href="https://discord.gg/yH4gbmF" class="discord"><i class="fab fa-discord"></i></a></li>
          <li><a href="https://twitter.com/playcallisto"><i class="fab fa-twitter-square"></i></a></li>
        </ul>
      </div>
    </footer>
  </div>

    <div class="search-screen">
        <div class="container">
            <input type="text" id="main-search" placeholder="Search...">

            <h2>Filters</h2>
            <div class="filters">
                <a href="#" data-search-filter="forums" class="filter">Only forums</a>
                <a href="#" data-search-filter="shop" class="filter">Only shop</a>
            </div>

            <div class="search-results" data-filter-type="shop">
                <div class="search-result search-shop">
                    <p class="search-info"><span class="info-type">Categorie: </span> <span class="categorie">Shop</span></p>
                    <p class="search-info"><span class="info-type">Location: </span> <a href="#" class="location">https://callisto.gg/shop/ranks</span></a>

                    <div class="search-details">
                        <h3>Details</h3>

                        <p class="detail-info"><span class="detail-type">Type:</span><span class="detail-cat">Rank</span></p>
                        <p class="detail-info"><span class="detail-type">Price:</span><span class="price">$5</span></p>

                    </div>

                    <a href="#" class="cta-goto">Go to page</a>
                </div>

                <div class="search-result search-forums" data-filter-type="forums">
                    <p class="search-info"><span class="info-type">Categorie: </span> <span class="categorie">Forums</span></p>
                    <p class="search-info"><span class="info-type">Location: </span> <a href="#" class="location">https://callisto.gg/forums/how-to-get-an-egirl</span></a>

                    <div class="search-details">
                        <h3>Details</h3>

                        <p class="detail-info"><span class="detail-type">Type:</span><span class="detail-cat">Post</span></p>
                        <p class="detail-info"><span class="detail-type detail-author">Author:</span><span class="author"><img width="30px" data-uuid="9beb2226-980b-433a-9076-54b4efd6ed5a" class="skin" alt="Head">edqtings</span></p>

                    </div>

                    <a href="#" class="cta-goto">Go to page</a>
                </div>

                <div class="search-result search-faq" data-filter-type="faq">
                    <p class="search-info"><span class="info-type">Categorie: </span> <span class="categorie">FAQ</span></p>
                    <p class="search-info"><span class="info-type">Location: </span> <a href="#" class="location">https://callisto.gg/faq?about</span></a>

                    <div class="search-details">
                        <h3>Details</h3>

                        <p class="detail-info"><span class="detail-type">Type:</span><span class="detail-cat">Question</span></p>

                    </div>

                    <a href="#" class="cta-goto">Go to page</a>
                </div>

                <p class="no-search-results">Nothing was found for the request <span class="search-req"></span></p>
            </div>

            <a href="#" class="close-search">&times;</a>
        </div>
    </div>

    <!-- Scripts -->
    <script src="libs/jquery/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/leonardosnt/mc-player-counter/dist/mc-player-counter.min.js"></script>
    <script src="https://mcapi.us/scripts/minecraft.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/common.js"></script>
    <script src="js/index.js"></script>

    <script>
      $(".comment .ign").each((index, el) => {
        let uuid = $(el).closest(".comment").find(".skin").attr("data-uuid");

        let request = new XMLHttpRequest();
        request.onload = function() {
            let response = JSON.parse(request.responseText);
                // If error exists throw the message
                console.log(response)
                if (response.code != null) {
                    throw response.msg;
                }
                $(el).html(response.username);
        };

        request.open("GET", "https://api.year4000.net/minecraft/" + uuid, true);
        request.send();
      });

      $(".post .ign, .add-comment .ign").each((index, el) => {
        let uuid = $(el).closest("div").find(".skin").attr("data-uuid");

        let request = new XMLHttpRequest();
        request.onload = function() {
            let response = JSON.parse(request.responseText);
                // If error exists throw the message
                console.log(response)
                if (response.code != null) {
                    throw response.msg;
                }
                $(el).html(response.username);
        };

        request.open("GET", "https://api.year4000.net/minecraft/" + uuid, true);
        request.send();
    });

    $(".skin").each((index, el) => {
        let uuid = $(el).attr("data-uuid");
        $(el).attr("src", "https://crafatar.com/avatars/" + uuid + "?size=45&default=MHF_Steve&overlay");
    });

    // Toggle reply block
    $(".reply-btn").each((index, el) => {
      $(el).click(() => {
        $(el).closest(".comment").find(".reply-block").toggle();
      })
    }) 

    //Input validation (wether its empty)
    validateInput(".comment-btn", $("#comment-input"))

    $(".reply-send").each((index, el) => {
      validateInput(el, $(el).closest(".reply-block").find("#reply-input"))
    })

    // Indicate action of liking/disliking with colors
    $(".fa-heart").each((index, el) => {
      $(el).closest("ul").on("click", "i", (e) => {
        if($(e.target).hasClass("fa-thumbs-down")) {
          if(!$(e.target).hasClass("dislike")) {
            $(el).closest("ul").find("i.fa-heart").removeClass("like");
            $(e.target).addClass("dislike")
          } else {
            $(e.target).removeClass("dislike")
          }
        } else if($(e.target).hasClass("fa-heart")){
          if(!$(e.target).hasClass("like")) {
            $(el).closest("ul").find("i.fa-thumbs-down").removeClass("dislike");
            $(e.target).addClass("like")
          } else {
            $(e.target).removeClass("like")
          }
        }
      })
    })

    function validateInput(eventEl, el) {
        $(eventEl).click(() => {
          if(el.val() !== "") {
            // Remove red error border
            el.css("border", "none")
          } else {
            // Error
            el.css("border", "1px solid rgba(255, 0, 0, 0.8)")
          }
        })
    }
    </script>
    
</body>
</html>